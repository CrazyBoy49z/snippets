<IfModule mod_headers.c>
    Header set X-Content-Type-Options nosniff
    Header set X-XSS-Protection "1; mode=block" 
    Header set X-Frame-Options SAMEORIGIN
    #Content-Security-Policy: default-src https: 'unsafe-eval' 'unsafe-inline'; object-src 'none'
    # Header set Content-Security-Policy "default-src 'self'; img-src 'self' http: https: *.gravatar.com;"
    #Header set Content-Security-Policy-Report-Only default-src 'junkers-paddelgemeinschaft.de'
    # Header set Content-Security-Policy: default-src 'none'; script-src junkers-paddelgemeinschaft.de
    #Access-Control-Allow-Origin: https://www.youtube-nocookie.com
    #Header set Content-Security-Policy-Report-Only "default-src https://junkers-paddelgemeinschaft.de googleads.g.doubleclick.net; img-src  https://junkers-paddelgemeinschaft.de google.com www.googleapis.com a.tile.openstreetmap.org b.tile.openstreetmap.org c.tile.openstreetmap.org googleads.g.doubleclick.net/pagead/id; frame-src www.youtube-nocookie.com; style-src https://junkers-paddelgemeinschaft.de google.com cse.google.com www.google.com  'unsafe-inline'; script-src https://junkers-paddelgemeinschaft.de 'unsafe-inline' doubleclick.net ytimg.js www.google.com cse.google.com child-src https://www.youtube-nocookie.com/"
    # Header unset X-Powered-By
    # Header unset SERVER
</IfModule>

ServerSignature Off

<IfModule mod_autoindex.c>
    Options -Indexes
</IfModule>

<FilesMatch "(\.(bak|config|sql|fla|psd|ini|log|sh|inc|swp|dist)|~)$">
    Order allow,deny
    Deny from all
    Satisfy All
</FilesMatch>

# Sicherheitseinstellung: erst auf dem Server anpasssen!
# LimitRequestBody 10240000
# php_value open_basedir /www/htdocs/pfad-zur-installation



# php_flag magic_quotes_gpc off
# php_value date.timezone Europe/Berlin

DefaultLanguage de-DE
AddDefaultCharset UTF-8
SetEnv TZ Europe/Berlin


#Options +FollowSymlinks
RewriteEngine On
RewriteBase /

#Redirect 301 /neu http://domain.tld/alt


# Fix Apache internal dummy connections from breaking [(site_url)] cache
RewriteCond %{HTTP_USER_AGENT} ^.*internal\ dummy\ connection.*$ [NC]
RewriteRule .* - [F,L]

# Rewrite domain.com -> www.domain.com -- used with SEO Strict URLs plugin
#RewriteCond %{HTTP_HOST} .
#ewriteCond %{HTTP_HOST} !^www\.example\.com [NC]
#RewriteRule (.*) http://www.example.com/$1 [R=301,L]

# without www
#RewriteCond %{HTTP_HOST} .
#RewriteCond %{HTTP_HOST} !^domain\.tld [NC]
#RewriteRule (.*) http://domain.tld/$1 [R=301,L]

# without www  all domian
#RewriteCond %{HTTP_HOST} .
#RewriteCond %{HTTP_HOST} ^www.(.*)$ [NC]
#RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

# Exclude /assets and /manager directories and images from rewrite rules
RewriteRule ^(manager|assets|js|css|images|img)/.*$ - [L]
RewriteRule \.(jpg|jpeg|png|gif|ico)$ - [L]

# Zeitstempel einfÂ¸gen
RewriteRule (.+)\.(min|dev)\.(\d+)\.(js|css)$ $1.$2.$4 [L]

#RewriteCond %{HTTP_REFERER} ^http://.*somebadforum\.com [NC,OR]
# RewriteRule .* - [F,L] 


# For Friendly URLs
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]

#RewriteCond %{HTTPS} !=on
#RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
#RewriteRule ^(.*)$ https://%1/$1 [R=301,L]


RewriteCond %{REQUEST_SCHEME} http [OR]
RewriteCond %{HTTP_HOST} ^www\.
# !!! https?
RewriteRule ^ https://DOMAIN.TLD%{REQUEST_URI} [NE,L,R] 
#RewriteRule (.*) https://junkers-paddelgemeinschaft.de/$1 [R=301,L]

#RewriteCond %{HTTPS} on
#RewriteCond %{HTTP_HOST} ^www\.(.*)
#RewriteRule ^(.*)$ https://%1/$1 [R=301,L]

# without www
#RewriteCond %{HTTPS} on
#RewriteCond %{HTTP_HOST} .
#RewriteCond %{HTTP_HOST} !^DOMAIN\.TLD [NC]
#RewriteRule (.*) https://DOMAIN.TLD/$1 [R=301,L]


#unsinige Google-Anfrage
RedirectMatch 403 (?i)\.well-known
RedirectMatch 403 (?i)apple-app-site-association

# Reduce server overhead by enabling output compression if supported.
#php_flag zlib.output_compression On
#php_value zlib.output_compression_level 5

<IfModule mod_mime.c>

	AddCharset utf-8 .html .css .js .xml .json .rss .vtt .xml

	DefaultType text/html
	
	AddType application/pdf 					pdf
	AddType text/css 							css
	AddType text/javascript 					js
	AddType application/javascript          	js
	AddType application/json                	json
	
	AddType image/jpeg 							jpg
	AddType image/png 							png
	AddType image/gif 							gif
	AddType image/x-icon 						ico
	
	AddType image/svg+xml  						svg svgz 
	AddEncoding gzip  							svgz
	
	AddType font/truetype                  		ttf
	AddType application/x-font-woff        		woff
	AddType application/font-woff2  			woff2
	
	AddType audio/mpeg 							mp3
	AddType audio/mp4 							m4a mp4 mpa                                                           
	AddType audio/ogg 							ogg
	AddType audio/ogg 							oga
	AddType audio/webm 							webma
	AddType audio/wav 							wav
	
	AddType video/ogg 							ogv
	AddType video/ogg 							ogg
	AddType video/mp4 							mp4
	AddType video/webm 							webm
	AddType application/x-shockwave-flash   	swf
	
	AddType text/calendar                       ics  
	
	AddType application/xml                     rss atom xml rdf
	AddType application/x-chrome-extension      crx
	AddType application/x-opera-extension       oex
	AddType application/x-xpinstall             xpi
	AddType application/octet-stream            gpx
	AddType application/octet-stream            kml
	AddType application/octet-stream            kmz 
	AddType text/x-vcard                        vcf
	AddType text/vtt                            vtt
	
	
</IfModule>


<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/calendar text/css text/javascript application/json application/javascript application/vnd.google-earth.kml+xml image/svg+xml 
    # alte Browser
    BrowserMatch ^Mozilla/4 gzip-only-text/html
    BrowserMatch ^Mozilla/4\.0[678] no-gzip
    BrowserMatch \bMSIE !no-gzip !gzip-only-text/html 
    # ausschlieszen
    SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png|pdf|mp3|wav|wma|au|m4p|snd|mid|wmv|mpg|mpeg|mp4|qt|mov|exe|t?gz|zip|gz2|sit|rar|woff|woff2)$ no-gzip
</IfModule>

<IfModule mod_expires.c>
	ExpiresActive on
	ExpiresDefault "access plus 1 month"
	 
	# CSS
	ExpiresByType text/css "access plus 1 year"
	
	# Data interchange
	ExpiresByType application/atom+xml "access plus 1 hour"
	ExpiresByType application/rdf+xml "access plus 1 hour"
	ExpiresByType application/rss+xml "access plus 1 hour"
	ExpiresByType application/json "access plus 0 seconds"
	ExpiresByType application/vnd.geo+json "access plus 0 seconds"
	ExpiresByType application/xml "access plus 0 seconds"
	ExpiresByType text/xml "access plus 0 seconds"
	ExpiresByType text/calendar "access plus 6 hours"
	
	# Favicon (cannot be renamed!) and cursor images
	ExpiresByType image/vnd.microsoft.icon "access plus 1 week"
	ExpiresByType image/x-icon "access plus 1 week"
	
	# HTML
	ExpiresByType text/html "access plus 5 minutes"
	
	# JavaScript
	ExpiresByType application/javascript "access plus 1 year"
	ExpiresByType application/x-javascript "access plus 1 year"
	ExpiresByType text/javascript "access plus 1 year"
	
	# Manifest files
	ExpiresByType application/manifest+json "access plus 1 year"
	ExpiresByType application/x-web-app-manifest+json "access plus 0 seconds"
	ExpiresByType text/cache-manifest "access plus 0 seconds"
	
	# Media files
	ExpiresByType audio/ogg "access plus 1 year"
	ExpiresByType image/bmp "access plus 1 year"
	ExpiresByType image/gif "access plus 1 year"
	ExpiresByType image/jpeg "access plus 1 year"
	ExpiresByType image/png "access plus 1 year"
	ExpiresByType image/svg+xml "access plus 1 year"
	ExpiresByType video/mp4 "access plus 1 year"
	ExpiresByType video/ogg "access plus 1 year"
	ExpiresByType video/webm "access plus 1 year"
	
	# Web fonts
	ExpiresByType application/x-font-ttf "access plus 1 year"
	ExpiresByType application/font-woff "access plus 1 year"
	ExpiresByType application/x-font-woff "access plus 1 year"
	ExpiresByType font/woff "access plus 1 year"
	ExpiresByType application/font-woff2 "access plus 1 year"
	
	# Other
	ExpiresByType text/x-cross-domain-policy "access plus 1 week" 
  
  	# alte Browser
  	BrowserMatch "MSIE" brokenvary=1
	BrowserMatch "Mozilla/4.[0-9]{2}" brokenvary=1
	BrowserMatch "Opera" !brokenvary
	SetEnvIf brokenvary 1 force-no-vary


  
</IfModule>


Header set Connection keep-alive
Header unset ETag
Header set Cache-Control "private, no-transform"
<FilesMatch "\.(css|gif|jpe?g|pdf|png|svg|ttf|woff|woff2)$">
    Header set Cache-Control "public, private"
</FilesMatch>
    
FileETag None

#php_flag log_errors on
#php_value error_log "/www/htdocs/w00f2f21/errlog/errlog.txt"
